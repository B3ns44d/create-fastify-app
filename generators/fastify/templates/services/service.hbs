'use strict'

const schema = require('./routes.schema')

module.exports = async function(fastify, opts) {

{{#each data}}
  {{#each this.path as |value key|}}
    {{#validMethod key}}
  fastify.{{key}}('{{../../endpointName}}', { schema: schema.{{camelCase (concat key ../../endpointName)}} }, async function (request, reply) {
    {{#checkSuccessResponses ../responses}}
    return reply
      .code({{code}})
      .send('{{data}}')
    {{/checkSuccessResponses}}
  })

    {{/validMethod}}
  {{/each}}
{{/each}}
}

module.exports.autoPrefix = '/{{prefix}}'
